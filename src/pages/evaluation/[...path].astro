---
import EvaluationResult from '~/components/core/EvaluationResultComponent';
import Layout from '~/layouts/PageLayout.astro';

const { path } = Astro.params;

const [id, schoolId, professor_name, professorId] = path ? path.split('/') : [0, 0, 'Not Found', 0];

const DB = Astro.locals.runtime.env.DB;

let response = await DB.prepare(`SELECT * FROM evaluations where ID = ?`).bind(id).all();

let evaluation = response?.results[0];
---

<Layout metadata={{ title: 'Evaluation' }}>
  <div class="container mx-auto">
    <h1 class="text-3xl font-bold text-center mt-8">Evaluation</h1>
    {evaluation && <EvaluationResult evaluation={evaluation} />}
  </div>
</Layout>

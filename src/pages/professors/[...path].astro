---
import Layout from '~/layouts/PageLayout.astro';
import LettersComponent from '~/components/core/LettersComponent';
import TableComponent from '~/components/core/TableComponent';
import EvaluationResultComponent from '~/components/core/EvaluationResultComponent';
import { getEvaluationsForProfessor } from '~/service/professor-service';
import ProfessorCardComponent from '~/components/core/ProfessorCardComponent';
import EvaluationSummaryComponent from '~/components/core/EvaluationSummaryComponent';

const { path } = Astro.params;
const [school_name, schoolId, professor_name, professorId] = path.split('/');

const metadata = {
  title: professor_name + ' - Rate My Professor Here',
  description: 'Rate your professors at and help other students stay informed informed.',
};

let professors = [];

let evaluations = await getEvaluationsForProfessor(Astro, Number(professorId), 1000000);

let eval1 = evaluations[0];

// if (letter) {
//   professors = await getProfessorsEvaluations(Astro, Number(professorId), letter);
// }

//console.log(Astro.params);
---

<Layout metadata={metadata}>
  <div class="container mx-auto mt-5">
    <h1 class="text-xl font-bold mt-5">
      {school_name} / <a class="underline" href={`/school/${school_name}/${schoolId}/E`}>E</a> / <span
        class="font-normal">{eval1?.FName} {eval1?.LName}</span
      >
    </h1>
    <div class="mt-5 border border-gray-100 rounded-lg shadow-md">
      <ProfessorCardComponent evaluations={evaluations} />

      <EvaluationSummaryComponent evaluations={evaluations} />
    </div>
  </div>
</Layout>
